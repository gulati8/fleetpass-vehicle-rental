{
  "permissions": {
    "defaultMode": "acceptEdits",
    "allow": [
      "Bash",
      "WebSearch",
      "Write(*)",
      "Edit(*)",
      "Read(*)",
      "Glob(*)",
      "Grep(*)",
      "Task(*)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "BLOCKED='rm -rf /|rm -rf \\\\.|git reset --hard|git clean -fd|git checkout --|chmod 777 /|chown -R /|mkfs|dd if=|shutdown|reboot|poweroff|docker login|kubectl delete --all|ssh \\S+'; CMD=\"$TOOL_ARGS_command\"; if printf \"%s\" \"$CMD\" | egrep -qi \"$BLOCKED\"; then echo \"Blocked command (safety guard): $CMD\"; exit 1; fi"
          },
          {
            "type": "command",
            "command": "CMD=\"$TOOL_ARGS_command\"; ID=$(printf \"%s\" \"$CMD\" | shasum | awk '{print $1}'); echo \"{\\\"timestamp\\\":\\\"$(date -Iseconds)\\\",\\\"event\\\":\\\"bash_start\\\",\\\"tool\\\":\\\"Bash\\\",\\\"id\\\":\\\"$ID\\\",\\\"command\\\":\\\"$CMD\\\"}\" >> .claude/logs/orchestration.jsonl 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "AGENT_PROMPT=\"$TOOL_ARGS_prompt\"; AGENT=\"unknown\"; case \"$AGENT_PROMPT\" in *researcher*) AGENT=researcher ;; *planner*) AGENT=planner ;; *code-writer*) AGENT=code-writer ;; *code-reviewer*) AGENT=code-reviewer ;; *test-writer*) AGENT=test-writer ;; *documentation-writer*) AGENT=documentation-writer ;; *log-analyzer*) AGENT=log-analyzer ;; *debugger*) AGENT=debugger ;; *summarizer*) AGENT=summarizer ;; *feedback-coordinator*) AGENT=feedback-coordinator ;; *frontend-architect*) AGENT=frontend-architect ;; *premium-ux-designer*) AGENT=premium-ux-designer ;; *database-architect*) AGENT=database-architect ;; *api-designer*) AGENT=api-designer ;; *security-auditor*) AGENT=security-auditor ;; *privacy-auditor*) AGENT=privacy-auditor ;; *release-manager*) AGENT=release-manager ;; *performance-optimizer*) AGENT=performance-optimizer ;; *devops-engineer*) AGENT=devops-engineer ;; *product-strategy-advisor*) AGENT=product-strategy-advisor ;; *code-refactorer*) AGENT=code-refactorer ;; *git-commit-helper*) AGENT=git-commit-helper ;; esac; MODEL=\"sonnet\"; case \"$AGENT\" in researcher|documentation-writer|log-analyzer|summarizer|feedback-coordinator|git-commit-helper) MODEL=\"haiku\" ;; esac; ID=$(printf \"%s\" \"$AGENT_PROMPT\" | shasum | awk '{print $1}'); TASK_SUMMARY=$(printf \"%s\" \"$AGENT_PROMPT\" | tr '\\n' ' ' | cut -c1-120); echo \"{\\\"timestamp\\\": \\\"$(date -Iseconds)\\\", \\\"event\\\": \\\"subagent_start\\\", \\\"tool\\\": \\\"Task\\\", \\\"agent\\\": \\\"$AGENT\\\", \\\"model\\\": \\\"$MODEL\\\", \\\"task_summary\\\": \\\"$TASK_SUMMARY\\\", \\\"id\\\": \\\"$ID\\\"}\" >> .claude/logs/orchestration.jsonl 2>/dev/null || true"
          },
          {
            "type": "command",
            "command": "AGENT_PROMPT=\"$TOOL_ARGS_prompt\"; case \"$AGENT_PROMPT\" in *researcher*) echo -e \"\\033[34m\ud83d\udd0d Starting researcher agent...\\033[0m\" ;; *planner*) echo -e \"\\033[35m\ud83d\udccb Starting planner agent...\\033[0m\" ;; *code-writer*) echo -e \"\\033[32m\u270d\ufe0f  Starting code-writer agent...\\033[0m\" ;; *code-reviewer*) echo -e \"\\033[33m\ud83d\udc41\ufe0f  Starting code-reviewer agent...\\033[0m\" ;; *test-writer*) echo -e \"\\033[36m\ud83e\uddea Starting test-writer agent...\\033[0m\" ;; *documentation-writer*) echo -e \"\\033[37m\ud83d\udcdd Starting documentation-writer agent...\\033[0m\" ;; *log-analyzer*) echo -e \"\\033[35m\ud83d\udcca Starting log-analyzer agent...\\033[0m\" ;; *debugger*) echo -e \"\\033[31m\ud83d\udc1b Starting debugger agent...\\033[0m\" ;; *summarizer*) echo -e \"\\033[90m\ud83d\udcce Starting summarizer agent...\\033[0m\" ;; *feedback-coordinator*) echo -e \"\\033[33m\ud83d\udd04 Starting feedback-coordinator agent...\\033[0m\" ;; esac"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "CMD=\"$TOOL_ARGS_command\"; STATUS=$?; ID=$(printf \"%s\" \"$CMD\" | shasum | awk '{print $1}'); echo \"{\\\"timestamp\\\":\\\"$(date -Iseconds)\\\",\\\"event\\\":\\\"bash_complete\\\",\\\"tool\\\":\\\"Bash\\\",\\\"id\\\":\\\"$ID\\\",\\\"command\\\":\\\"$CMD\\\",\\\"status\\\":$STATUS}\" >> .claude/logs/orchestration.jsonl 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "AGENT_PROMPT=\"$TOOL_ARGS_prompt\"; AGENT=\"unknown\"; case \"$AGENT_PROMPT\" in *researcher*) AGENT=researcher ;; *planner*) AGENT=planner ;; *code-writer*) AGENT=code-writer ;; *code-reviewer*) AGENT=code-reviewer ;; *test-writer*) AGENT=test-writer ;; *documentation-writer*) AGENT=documentation-writer ;; *log-analyzer*) AGENT=log-analyzer ;; *debugger*) AGENT=debugger ;; *summarizer*) AGENT=summarizer ;; *feedback-coordinator*) AGENT=feedback-coordinator ;; *frontend-architect*) AGENT=frontend-architect ;; *premium-ux-designer*) AGENT=premium-ux-designer ;; *database-architect*) AGENT=database-architect ;; *api-designer*) AGENT=api-designer ;; *security-auditor*) AGENT=security-auditor ;; *privacy-auditor*) AGENT=privacy-auditor ;; *release-manager*) AGENT=release-manager ;; *performance-optimizer*) AGENT=performance-optimizer ;; *devops-engineer*) AGENT=devops-engineer ;; *product-strategy-advisor*) AGENT=product-strategy-advisor ;; *code-refactorer*) AGENT=code-refactorer ;; *git-commit-helper*) AGENT=git-commit-helper ;; esac; MODEL=\"sonnet\"; case \"$AGENT\" in researcher|documentation-writer|log-analyzer|summarizer|feedback-coordinator|git-commit-helper) MODEL=\"haiku\" ;; esac; ID=$(printf \"%s\" \"$AGENT_PROMPT\" | shasum | awk '{print $1}'); TASK_SUMMARY=$(printf \"%s\" \"$AGENT_PROMPT\" | tr '\\n' ' ' | cut -c1-120); echo \"{\\\"timestamp\\\": \\\"$(date -Iseconds)\\\", \\\"event\\\": \\\"subagent_complete\\\", \\\"tool\\\": \\\"Task\\\", \\\"agent\\\": \\\"$AGENT\\\", \\\"model\\\": \\\"$MODEL\\\", \\\"task_summary\\\": \\\"$TASK_SUMMARY\\\", \\\"status\\\": \\\"complete\\\", \\\"id\\\": \\\"$ID\\\"}\" >> .claude/logs/orchestration.jsonl 2>/dev/null || true"
          },
          {
            "type": "command",
            "command": "AGENT_PROMPT=\"$TOOL_ARGS_prompt\"; case \"$AGENT_PROMPT\" in *researcher*) echo -e \"\\033[34m\ud83d\udd0d Researcher agent complete\\033[0m\" ;; *planner*) echo -e \"\\033[35m\ud83d\udccb Planner agent complete\\033[0m\" ;; *code-writer*) echo -e \"\\033[32m\u270d\ufe0f  Code-writer agent complete\\033[0m\" ;; *code-reviewer*) echo -e \"\\033[33m\ud83d\udc41\ufe0f  Code-reviewer agent complete\\033[0m\" ;; *test-writer*) echo -e \"\\033[36m\ud83e\uddea Test-writer agent complete\\033[0m\" ;; *documentation-writer*) echo -e \"\\033[37m\ud83d\udcdd Documentation-writer agent complete\\033[0m\" ;; *log-analyzer*) echo -e \"\\033[35m\ud83d\udcca Log-analyzer agent complete\\033[0m\" ;; *debugger*) echo -e \"\\033[31m\ud83d\udc1b Debugger agent complete\\033[0m\" ;; *summarizer*) echo -e \"\\033[90m\ud83d\udcce Summarizer agent complete\\033[0m\" ;; *feedback-coordinator*) echo -e \"\\033[33m\ud83d\udd04 Feedback-coordinator agent complete\\033[0m\" ;; esac"
          }
        ]
      }
    ]
  }
}